#Load Conda
eval "$(~/miniforge3/bin/conda shell.bash hook)"

# Create a new environment named 'llm_env' with Python and the required build tools
conda create --name llm_venv python=3.9 gxx_linux-64 cmake -c conda-forge -y

# Activate the new environment
conda activate llm_venv

# Update pip
pip install --upgrade pip

# Install required libraries
pip install -r requirements.txt

# For GPU support
CMAKE_ARGS="-DLLAMA_CUBLAS=on" FORCE_CMAKE=1 pip install --force-reinstall --no-cache-dir llama-cpp-python

# Install jupyterlab kernel
python -m ipykernel install --user --name llm_venv --display-name "llm_venv (kernel)"

